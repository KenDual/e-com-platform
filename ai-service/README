#cài FastAPI
pip install fastapi uvicorn[standard] faiss-cpu pandas numpy sqlalchemy pyodbc requests python-dotenv

# cài đặt môi trường
pip install pyodbc

# chạy
uvicorn main:app --reload --port 8000

# trong terminal khác
ollama pull nomic-embed-text
ollama pull llama3:8b


# ───────────────────────── BƯỚC 0 ─────────────────────────
# Tạo virtual-env & cài thư viện
python -m venv .venv
# Windows
.venv\Scripts\activate
# macOS / Linux
# source .venv/bin/activate

pip install fastapi "uvicorn[standard]" pandas numpy sqlalchemy python-dotenv faiss-cpu tqdm requests


# ───────────────────────── BƯỚC 1 ─────────────────────────
# Tạo file .env trong thư mục dự án (ai-service/.env)

DB_DSN=mssql+pyodbc://user:pass@localhost/Ecommerce?driver=ODBC+Driver+17+for+SQL+Server
OLLAMA_BASE=http://localhost:11434

DB_DSN=mssql+pyodbc://sa:YourPassword@localhost:1433/Ecommerce?driver=ODBC+Driver+17+for+SQL+Server
OLLAMA_BASE=http://localhost:11434

# ───────────────────────── BƯỚC 2 ─────────────────────────
# Chạy script sinh embedding 768-dim, ghi DB & tạo laptop_faiss.index
python gen_embeddings_768.py



# ───────────────────────── BƯỚC 3 ─────────────────────────
# Khởi động API FastAPI (port 8000)
uvicorn api_server:app --reload --port 8000


# ───────────────────────── BƯỚC 4 ─────────────────────────
# Mở trình duyệt → http://127.0.0.1:8000/docs
# Trong mục POST /chat thử payload JSON:
# { "query": "Need a lightweight laptop under 20 million VND" }
